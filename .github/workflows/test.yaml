---
name: securefix
# on: push
on: pull_request
jobs:
  test:
    runs-on: ubuntu-24.04
    timeout-minutes: 10
    permissions:
      contents: read
    steps:
      - uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683 # v4.2.2
        with:
          persist-credentials: false
      - run: |
          echo "foo" > foo.txt
          mkdir -p bar
          echo "bar" > bar/bar.txt
          # echo "zoo" > zoo.txt
          if [ -f foo.txt ]; then
            mv foo.txt zoo.txt
          fi

      - uses: securefix-action/action@feat/notify
        with:
          app_id: ${{vars.AUTOFIX_TRIGGER_APP_ID}}
          app_private_key: ${{secrets.AUTOFIX_TRIGGER_APP_PRIVATE_KEY}}
          server_repository: securefix-demo-server
